### [815. 公交路线](https://leetcode-cn.com/problems/bus-routes/)

* 将每个公交路线看作一个点，公共路线看作边，构建无向图
* 存储每个点上有哪些公交路线
* 遍历完当前点后将其从哈希表中删除

```java
class Solution {
    public int numBusesToDestination(int[][] routes, int source, int target) {
        if (source == target) return 0;
        int n = routes.length;
        HashMap<Integer, List<Integer>> g = new HashMap<>();
        int[] dist = new int[n];
        Arrays.fill(dist, 1000000);
        Queue<Integer> queue = new LinkedList<>();
        for (int i = 0; i < n; ++i) {
            for (int x: routes[i]) {
                if (x == source) {
                    dist[i] = 1;
                    queue.offer(i);
                }
                g.computeIfAbsent(x, l -> new ArrayList<>()).add(i);
            }
        }
        while (!queue.isEmpty()) {
            int t = queue.poll();
            for (int x: routes[t]) {
                if (x == target) return dist[t];
                if (g.get(x) != null) {
                    for (int y: g.get(x)) {
                        if (dist[y] > dist[t] + 1) {
                            dist[y] = dist[t] + 1;
                            queue.offer(y);
                        }
                    }
                }
                g.remove(x);
            }
        }
        return -1;
    }
}
```



